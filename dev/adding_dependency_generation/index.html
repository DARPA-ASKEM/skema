<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="University of Arizona &amp; Lum AI">
  <link rel="canonical" href="https://ml4ai.github.io/skema/dev/adding_dependency_generation/">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Adding dependency generation for new language - skema</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  <link href="../../css/extra.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Adding dependency generation for new language";
    var mkdocs_page_input_path = "dev/adding_dependency_generation.md";
    var mkdocs_page_url = "/skema/dev/adding_dependency_generation/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> skema</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../software/">Software</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../changes/">Releases</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">About</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../team/">Team</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../license/">License</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../examples/">Examples</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Developing</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../env/">Configuring your development environment</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../eqn2mml/">Configuring <code>img2mml</code></a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../docs/">Building documentation</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../docker/">Building docker images</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../creating-an-incremental-release/">Publishing an incremental release</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../adding_new_model/">Adding a new model</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../adding_new_tree_sitter_frontend/">Adding a new tree-sitter frontend</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Adding dependency generation for new language</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#extract_imports">extract_imports</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#module_locate">module_locate</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../generating_code2fn_model_coverage/">Generating code2fn model coverage reports</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../using_code_ingestion_frontends/">Using code ingestion frontends</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../using_tree_sitter_preprocessor/">Using tree-sitter preprocessor</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../cast_frontend/">CAST Front-end generation</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Coverage</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../coverage/code2fn_coverage/report.html">Code2fn coverage reports</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="https://integration-dashboard.terarium.ai/TA1">TA1 Integration Dashboard</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../coverage/">Test coverage reports</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">API (Python)</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/python/skema/gromet/"><code>skema.gromet</code></a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/python/skema/img2mml/"><code>skema.img2mml</code></a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/python/skema/isa/"><code>skema.isa</code></a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/python/skema/skema_py/"><code>skema.skema_py</code></a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">API (Rust)</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/rust/help.html"><code>skema.rust</code></a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">API (Scala)</span></p>
                <ul>
                    <li class="toctree-l1"><a class="" href="../../api/scala/index.html"><code>skema.scala</code></a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">skema</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Developing &raquo;</li>
        
      
    
    <li>Adding dependency generation for new language</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/ml4ai/skema/blob/main/docs/dev/adding_dependency_generation.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h2 id="skemaprogram_analysismodule_locatepy">skema/program_analysis/module_locate.py<a class="headerlink" href="#skemaprogram_analysismodule_locatepy" title="Permanent link"></a></h2>
<h3 id="extract_imports">extract_imports<a class="headerlink" href="#extract_imports" title="Permanent link"></a></h3>
<p>Modify the <code>extract_imports</code> function to support extracting the names of imported modules for your language. For Python we use regex on the raw source code, but depending on the particular language you could also use Gromet or tree-sitter. </p>
<p>For example, the following would return ["time", "tree_sitter"]:</p>
<pre><code>import time
from tree_sitter import Tree
</code></pre>
<p>Note that we are only returning the module name and not the object or function being imported. This is because module is currently the smallest unit of ingestion for Gromet.</p>
<h3 id="module_locate">module_locate<a class="headerlink" href="#module_locate" title="Permanent link"></a></h3>
<p>Update <code>module_locate</code> function to support locating the source for the modules. This task is more opened ended depending on your particular language. For Python we check:
1. Python directory for built-in modules
2. site-packages for installed modules
3. pypi for all other module</p>
<h2 id="skemaprogram_analyismulti_file_ingesterpy">skema/program_analyis/multi_file_ingester.py<a class="headerlink" href="#skemaprogram_analyismulti_file_ingesterpy" title="Permanent link"></a></h2>
<h3 id="clean_dependencies">clean_dependencies<a class="headerlink" href="#clean_dependencies" title="Permanent link"></a></h3>
<p>The <code>clean_dependencies</code> function is used to postprocess the dependency references generated by the module_locate module. Some of these steps will likely be relevant between languages such as removing duplicate dependencies. Others like removing submodules if a parent module is present will only be relevant for certain languages like Python. Additionally, there may need to be further steps added for other languages.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../generating_code2fn_model_coverage/" class="btn btn-neutral float-right" title="Generating code2fn model coverage reports">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../adding_new_tree_sitter_frontend/" class="btn btn-neutral" title="Adding a new tree-sitter frontend"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2023 University of Arizona &amp; Lum AI.</p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/ml4ai/skema/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../adding_new_tree_sitter_frontend/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../generating_code2fn_model_coverage/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
